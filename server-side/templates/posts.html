<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{{ url_for('static', filename='create_post.css') }}">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600&display=swap" rel="stylesheet">
  <link flex href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
  <script src="script.js" defer></script>
  <title>Posts</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    .container {
      max-width: 800px;
      padding-top: 30px;
    }

    .announcement-box {
      background-color: #fff;
      border: 1px solid #ddd;
      padding: 20px;
      margin-bottom: 20px;
    }

    .announcement-box h2 {
      font-size: 24px;
      margin-bottom: 10px;
    }

    .announcement-box p {
      font-size: 16px;
      margin-bottom: 10px;
    }

    .announcement-box .date {
      font-size: 14px;
      color: #888;
    }

    .announcement-box .download-link {
      display: block;
      margin-top: 10px;
      color: #007bff;
      text-decoration: none;
    }

    .announcement-box .download-link:hover {
      text-decoration: underline;
    }

    .create-button,
    .edit-button,
    .delete-button {
      display: inline-block;
      padding: 6px 12px;
      margin-top: 10px;
      font-size: 14px;
      font-weight: 400;
      line-height: 1.42857143;
      text-align: center;
      white-space: nowrap;
      vertical-align: middle;
      cursor: pointer;
      border: 1px solid transparent;
      border-radius: 4px;
      text-decoration: none;
      transition: background-color 0.3s ease;
    }

    .create-button {
      background-color: #007bff;
      color: #fff;
    }

    .create-button:hover {
      background-color: #0056b3;
      border-color: #0056b3;
    }

    .edit-button {
      background-color: #28a745;
      color: #fff;
    }

    .edit-button:hover {
      background-color: #1e7e34;
      border-color: #1e7e34;
    }

    .delete-button {
      background-color: #dc3545;
      color: #fff;
    }

    .delete-button:hover {
      background-color: #a71d2a;
      border-color: #a71d2a;
    }
  </style>
</head>

<body>
  <nav class="sidebar close">
    <header>
      <div class="image-text">
        <span class="image">
          <img src="{{ url_for('static', filename='icon/bank-bri.jpg') }}" alt="logo_img" />
        </span>

        <div class="text logo-text">
          <span class="name">BRIMINDER</span>
          <span class="profession">KC BRI Teluk Betung</span>
        </div>
      </div>
      <i class='bx bx-chevron-right toggle'></i>
    </header>


    <div class="menu-bar">
      <div class="menu">

        <li class="search-box">
          <i class='bx bx-user-circle icon'></i>
          <a class="text nav-text">{{ session.level }} | {{ session.nama }}</a>
        </li>


        <ul class="menu-links">
          {% if session['level'] == 'Admin' : %}
          <li class="nav-link">
            <a href="/beranda">
              <i class='bx bx-home-alt icon'></i>
              <span class="text nav-text">Beranda</span>
            </a>
          </li>

          <li class="nav-link">
            <a href="/kelolauser">
              <i class='bx bxs-user-detail icon'></i>
              <span class="text nav-text">Kelola User</span>
            </a>
          </li>
          <li class="nav-link">
            <a href="/posts">
              <i class='bx bx-news icon'></i>
              <span class="text nav-text">Pengumuman</span>
            </a>
          {% else %}
            <style>
              /* Styles for body dashboard */
              body {
                font-family: Arial, sans-serif;
                background-color: #f8f9fa;
              }

              .home {
                padding: 40px;
                padding-left: 200px;
              }

              .head {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 20px;
              }

              .jadwal {
                font-size: 24px;
                font-weight: bold;
                margin-right: 20px;
              }

              .cari {
                display: flex;
                align-items: center;
              }

              .label-input {
                margin-right: 10px;
              }

              .wrap-input {
                position: relative;
              }

              .input-field {
                padding: 8px;
                border-radius: 4px;
                border: 1px solid #ccc;
              }

              .table {
                margin-top: 20px;
              }

              .datatable {
                width: 100%;
                border-collapse: collapse;
              }

              .datatable th,
              .datatable td {
                padding: 8px;
                border: 1px solid #ccc;
              }

              .datatable th {
                font-weight: bold;
                text-align: left;
                background-color: #f2f2f2;
              }

              .datatable tbody tr:nth-child(even) {
                background-color: #f8f9fa;
              }

              .info-box {
                display: flex;
                align-items: center;
                margin-top: 20px;
                padding: 70px;
                border-radius: 4px;
                background-color: #fff;
                margin-right: 100px;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                width: 400px;
              }

              .info-box.active {
                background-color: #f2f2f2;
              }

              .box-icon {
                margin-right: 10px;
              }

              .info-box svg {
                width: 24px;
                height: 24px;
              }

              .info-box .box-content {
                text-align: left;
              }

              .info-box .box-content .big {
                font-size: 24px;
                font-weight: bold;
              }
            </style>
            <li class="nav-link">
              <a href="/beranda">
                <i class='bx bx-home-alt icon'></i>
                <span class="text nav-text">Beranda</span>
              </a>
            </li>

            <li class="nav-link">
              <a href="/restrukturisasi">
                <i class='bx bx-notepad icon'></i>
                <span class="text nav-text">Restrukturisasi</span>
              </a>
            </li>

            <li class="nav-link">
              <a href="/register">
                <i class='bx bxs-file-plus icon'></i>
                <span class="text nav-text">Register</span>
              </a>
            </li>
          {% endif %}
        </ul>
      </div>

      <div class="bottom-content">
        <li class="">
          <a href="/logout">
            <i class='bx bx-log-out icon'></i>
            <span class="text nav-text">Keluar</span>
          </a>
        </li>

        <li class="mode">
          <div class="sun-moon">
            <i class='bx bx-moon icon moon'></i>
            <i class='bx bx-sun icon sun'></i>
          </div>
          <span class="mode-text text">Dark mode</span>

          <div class="toggle-switch">
            <span class="switch"></span>
          </div>
        </li>
      </div>
    </div>
  </nav>



<section class="home">
    {% if session['level'] == 'Admin' %}
    <div class="container">
      <h1>Pengumuman</h1>
      <br>
      <div class="button-container">
        <a href="{{ url_for('create_post') }}"><button class="create-button">Create New Post</button></a>
      </div>
      <br>
      {% for post in posts %}
      <div class="announcement-box">
        <h2>{{ post[1] }}</h2>
        <p>{{ post[2] }}</p>
        <div class="date">Tanggal: {{ post[3] }}</div>
        {% if post[4] %}
        <a href="{{ url_for('download_document', filename=post[4]) }}" class="download-link">Unduh Dokumen</a>
        {% else %}
        <p>Tidak Ada Dokumen</p>
        {% endif %}
        <div class="edit-delete-container">
          <a href="{{ url_for('edit_post', post_id=post[0]) }}" class="edit-button">Edit</a>
          <form action="{{ url_for('delete_post', post_id=post[0]) }}" method="POST" class="delete-form">
            <button class="delete-button" onclick="return confirm('Apakah Anda yakin ingin menghapus pengumuman ini?')">Hapus</button>
          </form>
        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
    <div class="container">
      <h1>Pengumuman</h1>
      <br>
      {% for post in posts %}
      <div class="announcement-box">
        <h2>{{ post[1] }}</h2>
        <p>{{ post[2] }}</p>
        <div class="date">Tanggal: {{ post[3] }}</div>
        {% if post[4] %}
        <a href="{{ url_for('download_document', filename=post[4]) }}" class="download-link">Unduh Dokumen</a>
        {% else %}
        <p>Tidak Ada Dokumen</p>
        {% endif %}
      </div>
      {% endfor %}
    </div>
    {% endif %}
</section>


<script>
  const body = document.querySelector('body'),
    sidebar = body.querySelector('nav'),
    toggle = body.querySelector(".toggle"),
    searchBtn = body.querySelector(".search-box"),
    modeSwitch = body.querySelector(".toggle-switch"),
    modeText = body.querySelector(".mode-text");


  toggle.addEventListener("click", () => {
    sidebar.classList.toggle("close");
  })

  searchBtn.addEventListener("click", () => {
    sidebar.classList.remove("close");
  })

  modeSwitch.addEventListener("click", () => {
    body.classList.toggle("dark");

    if (body.classList.contains("dark")) {
      modeText.innerText = "Light mode";
    } else {
      modeText.innerText = "Dark mode";

    }
  });
</script>

</body>

</html>
